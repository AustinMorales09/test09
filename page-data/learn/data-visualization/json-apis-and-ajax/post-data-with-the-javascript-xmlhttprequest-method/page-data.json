{
    "componentChunkName": "component---src-templates-challenges-classic-show-tsx",
    "path": "/learn/data-visualization/json-apis-and-ajax/post-data-with-the-javascript-xmlhttprequest-method",
    "result": {"data":{"challengeNode":{"challenge":{"block":"json-apis-and-ajax","title":"Post Data with the JavaScript XMLHttpRequest Method","description":"<section id=\"description\">\n<p>In the previous examples, you received data from an external resource. You can also send data to an external resource, as long as that resource supports AJAX requests and you know the URL.</p>\n<p>JavaScript's <code>XMLHttpRequest</code> method is also used to post data to a server. Here's an example:</p>\n<pre><code class=\"language-js\">const xhr = new XMLHttpRequest();\nxhr.open('POST', url, true);\nxhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\nxhr.onreadystatechange = function () {\n  if (xhr.readyState === 4 &#x26;&#x26; xhr.status === 201){\n    const serverResponse = JSON.parse(xhr.response);\n    document.getElementsByClassName('message')[0].textContent = serverResponse.userName + serverResponse.suffix;\n  }\n};\nconst body = JSON.stringify({ userName: userName, suffix: ' loves cats!' });\nxhr.send(body);\n</code></pre>\n<p>You've seen several of these methods before. Here the <code>open</code> method initializes the request as a <code>POST</code> to the given URL of the external resource, and passes <code>true</code> as the third parameter - indicating to perform the operation asynchronously.</p>\n<p>The <code>setRequestHeader</code> method sets the value of an HTTP request header, which contains information about the sender and the request. It must be called after the <code>open</code> method, but before the <code>send</code> method. The two parameters are the name of the header and the value to set as the body of that header.</p>\n<p>Next, the <code>onreadystatechange</code> event listener handles a change in the state of the request. A <code>readyState</code> of <code>4</code> means the operation is complete, and a <code>status</code> of <code>201</code> means it was a successful request. Therefore, the document's HTML can be updated.</p>\n<p>Finally, the <code>send</code> method sends the request with the <code>body</code> value. The <code>body</code> consists of a <code>userName</code> and a <code>suffix</code> key.</p>\n</section>","id":"587d7faf367417b2b2512be9","hasEditableBoundaries":false,"instructions":"<section id=\"instructions\">\n<p>Update the code so it makes a <code>POST</code> request to the API endpoint. Then type your name in the input field and click <code>Send Message</code>. Your AJAX function should replace <code>Reply from Server will be here.</code> with data from the server. Format the response to display your name appended with the text <code> loves cats</code>.</p>\n</section>","notes":null,"challengeType":6,"helpCategory":"JavaScript","videoUrl":null,"superBlock":"data-visualization","translationPending":false,"forumTopicId":301504,"fields":{"blockName":"json-apis-and-ajax","slug":"/learn/data-visualization/json-apis-and-ajax/post-data-with-the-javascript-xmlhttprequest-method","tests":[{"text":"<p>Your code should create a new <code>XMLHttpRequest</code>.</p>","testString":"assert(code.match(/new\\s+?XMLHttpRequest\\(\\s*?\\)/g));"},{"text":"<p>Your code should use the <code>open</code> method to initialize a <code>POST</code> request to the server.</p>","testString":"assert(code.match(/\\.open\\(\\s*?('|\")POST\\1\\s*?,\\s*?url\\s*?,\\s*?true\\s*?\\)/g));"},{"text":"<p>Your code should use the <code>setRequestHeader</code> method.</p>","testString":"assert(\n  code.match(\n    /\\.setRequestHeader\\(\\s*?('|\")Content-Type\\1\\s*?,\\s*?('|\")application\\/json;\\s*charset=UTF-8\\2\\s*?\\)/g\n  )\n);"},{"text":"<p>Your code should have an <code>onreadystatechange</code> event handler set to a function.</p>","testString":"assert(code.match(/\\.onreadystatechange\\s*?=/g));"},{"text":"<p>Your code should get the element with class <code>message</code> and change its <code>textContent</code> to <code>userName loves cats</code></p>","testString":"assert(\n  code.match(\n    /document\\.getElementsByClassName\\(\\s*?('|\")message\\1\\s*?\\)\\[0\\]\\.textContent\\s*?=\\s*?.+?\\.userName\\s*?\\+\\s*?.+?\\.suffix/g\n  )\n);"},{"text":"<p>Your code should use the <code>send</code> method.</p>","testString":"assert(code.match(/\\.send\\(\\s*?body\\s*?\\)/g));"}]},"required":[{"link":"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css","src":null}],"usesMultifileEditor":false,"challengeFiles":[{"fileKey":"indexhtml","ext":"html","name":"index","contents":"<script>\n  document.addEventListener('DOMContentLoaded', function(){\n    document.getElementById('sendMessage').onclick = function(){\n\n      const userName = document.getElementById('name').value;\n      const url = 'https://jsonplaceholder.typicode.com/posts';\n      // Add your code below this line\n\n\n      // Add your code above this line\n    };\n  });\n</script>\n\n<style>\n  body {\n    text-align: center;\n    font-family: \"Helvetica\", sans-serif;\n  }\n  h1 {\n    font-size: 2em;\n    font-weight: bold;\n  }\n  .box {\n    border-radius: 5px;\n    background-color: #eee;\n    padding: 20px 5px;\n  }\n  button {\n    color: white;\n    background-color: #4791d0;\n    border-radius: 5px;\n    border: 1px solid #4791d0;\n    padding: 5px 10px 8px 10px;\n  }\n  button:hover {\n    background-color: #0F5897;\n    border: 1px solid #0F5897;\n  }\n</style>\n\n<h1>Cat Friends</h1>\n<p class=\"message box\">\n  Reply from Server will be here\n</p>\n<p>\n  <label for=\"name\">Your name:\n    <input type=\"text\" id=\"name\"/>\n  </label>\n  <button id=\"sendMessage\">\n    Send Message\n  </button>\n</p>","head":"","tail":"","editableRegionBoundaries":[],"history":["index.html"]}]}}},"pageContext":{"challengeMeta":{"blockHashSlug":"/learn/data-visualization/#json-apis-and-ajax","dashedName":"post-data-with-the-javascript-xmlhttprequest-method","certification":"data-visualization","disableLoopProtectTests":false,"disableLoopProtectPreview":false,"superBlock":"data-visualization","block":"json-apis-and-ajax","isFirstStep":false,"template":null,"required":[{"link":"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css","src":null}],"nextBlock":"data-visualization-projects","nextChallengePath":"/learn/data-visualization/data-visualization-projects/visualize-data-with-a-bar-chart","prevChallengePath":"/learn/data-visualization/json-apis-and-ajax/get-geolocation-data-to-find-a-users-gps-coordinates","id":"587d7faf367417b2b2512be9"},"projectPreview":{"showProjectPreview":false,"challengeData":{"challengeType":6,"challengeFiles":[{"name":"index","ext":"html","contents":"<script>\n  document.addEventListener('DOMContentLoaded', function(){\n    document.getElementById('sendMessage').onclick = function(){\n\n      const userName = document.getElementById('name').value;\n      const url = 'https://jsonplaceholder.typicode.com/posts';\n      // Add your code below this line\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', url, true);\n      xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4 && xhr.status === 201){\n          const serverResponse = JSON.parse(xhr.response);\n          document.getElementsByClassName('message')[0].textContent = serverResponse.userName + serverResponse.suffix;\n       }\n     };\n     const body = JSON.stringify({ userName: userName, suffix: ' loves cats!' });\n     xhr.send(body);\n      // Add your code above this line\n    };\n  });\n</script>\n\n<style>\n  body {\n    text-align: center;\n    font-family: \"Helvetica\", sans-serif;\n  }\n  h1 {\n    font-size: 2em;\n    font-weight: bold;\n  }\n  .box {\n    border-radius: 5px;\n    background-color: #eee;\n    padding: 20px 5px;\n  }\n  button {\n    color: white;\n    background-color: #4791d0;\n    border-radius: 5px;\n    border: 1px solid #4791d0;\n    padding: 5px 10px 8px 10px;\n  }\n  button:hover {\n    background-color: #0F5897;\n    border: 1px solid #0F5897;\n  }\n</style>\n\n<h1>Cat Friends</h1>\n<p class=\"message\">\n  Reply from Server will be here\n</p>\n<p>\n  <label for=\"name\">Your name:\n    <input type=\"text\" id=\"name\"/>\n  </label>\n  <button id=\"sendMessage\">\n    Send Message\n  </button>\n</p>","head":"","tail":"","history":["index.html"],"fileKey":"indexhtml"}]}},"slug":"/learn/data-visualization/json-apis-and-ajax/post-data-with-the-javascript-xmlhttprequest-method"}},
    "staticQueryHashes": ["1800977889","4268002518"]}