{
    "componentChunkName": "component---src-templates-challenges-classic-show-tsx",
    "path": "/learn/rosetta-code/rosetta-code-challenges/hash-join",
    "result": {"data":{"challengeNode":{"challenge":{"block":"rosetta-code-challenges","title":"Hash join","description":"<section id=\"description\">\n<p>An inner join is an operation that combines two data tables into one table, based on matching column values. The simplest way of implementing this operation is the nested loop join algorithm, but a more scalable alternative is the hash join algorithm.</p>\n<p>The \"hash join\" algorithm consists of two steps:</p>\n<ol>\n  <li><strong>Hash phase:</strong> Create a multimap from one of the two tables, mapping from each join column value to all the rows that contain it.</li>\n  <ul>\n    <li>The multimap must support hash-based lookup which scales better than a simple linear search, because that's the whole point of this algorithm.</li>\n    <li>Ideally we should create the multimap for the smaller table, thus minimizing its creation time and memory size.</li>\n  </ul>\n  <li><strong>Join phase:</strong> Scan the other table, and find matching rows by looking in the multimap created before.</li>\n</ol>\n<p>In pseudo-code, the algorithm could be expressed as follows:</p>\n<pre><strong>let</strong> <i>A</i> = the first input table (or ideally, the larger one)\n<strong>let</strong> <i>B</i> = the second input table (or ideally, the smaller one)\n<strong>let</strong> <i>j<sub>A</sub></i> = the join column ID of table <i>A</i>\n<strong>let</strong> <i>j<sub>B</sub></i> = the join column ID of table <i>B</i>\n<strong>let</strong> <i>M<sub>B</sub></i> = a multimap for mapping from single values to multiple rows of table <i>B</i> (starts out empty)\n<strong>let</strong> <i>C</i> = the output table (starts out empty)\n<strong>for each</strong> row <i>b</i> in table <i>B</i>:\n  <strong>place</strong> <i>b</i> in multimap <i>M<sub>B</sub></i> under key <i>b(j<sub>B</sub>)</i>\n<strong>for each</strong> row <i>a</i> in table <i>A</i>:\n  <strong>for each</strong> row <i>b</i> in multimap <i>M<sub>B</sub></i> under key <i>a(j<sub>A</sub>)</i>:\n    <strong>let</strong> <i>c</i> = the concatenation of row <i>a</i> and row <i>b</i>\n    <strong>place</strong> row <i>c</i> in table <i>C</i>\n</pre>\n</section>","id":"5956795bc9e2c415eb244de1","hasEditableBoundaries":false,"instructions":"<section id=\"instructions\">\n<p>Implement the \"hash join\" algorithm as a function and demonstrate that it passes the test-case listed below. The function should accept two arrays of objects and return an array of combined objects.</p>\n<p><strong>Input</strong></p>\n<table>\n  <tr>\n    <td style=\"padding: 4px; margin: 5px;\">\n      <table style=\"border:none; border-collapse:collapse;\">\n        <tr>\n          <td style=\"border:none\"><i>A =</i></td>\n          <td style=\"border:none\">\n            <table>\n              <tr>\n                <th style=\"padding: 4px; margin: 5px;\">Age</th>\n                <th style=\"padding: 4px; margin: 5px;\">Name</th>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">27</td>\n                <td style=\"padding: 4px; margin: 5px;\">Jonah</td>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">18</td>\n                <td style=\"padding: 4px; margin: 5px;\">Alan</td>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">28</td>\n                <td style=\"padding: 4px; margin: 5px;\">Glory</td>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">18</td>\n                <td style=\"padding: 4px; margin: 5px;\">Popeye</td>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">28</td>\n                <td style=\"padding: 4px; margin: 5px;\">Alan</td>\n              </tr>\n            </table>\n          </td>\n          <td style=\"border:none; padding-left:1.5em;\" rowspan=\"2\"></td>\n          <td style=\"border:none\"><i>B =</i></td>\n          <td style=\"border:none\">\n            <table>\n              <tr>\n                <th style=\"padding: 4px; margin: 5px;\">Character</th>\n                <th style=\"padding: 4px; margin: 5px;\">Nemesis</th>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">Jonah</td>\n                <td style=\"padding: 4px; margin: 5px;\">Whales</td>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">Jonah</td>\n                <td style=\"padding: 4px; margin: 5px;\">Spiders</td>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">Alan</td>\n                <td style=\"padding: 4px; margin: 5px;\">Ghosts</td>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">Alan</td>\n                <td style=\"padding: 4px; margin: 5px;\">Zombies</td>\n              </tr>\n              <tr>\n                <td style=\"padding: 4px; margin: 5px;\">Glory</td>\n                <td style=\"padding: 4px; margin: 5px;\">Buffy</td>\n              </tr>\n            </table>\n          </td>\n        </tr>\n        <tr>\n          <td style=\"border:none\">\n            <i>j<sub>A</sub> =</i>\n          </td>\n          <td style=\"border:none\">\n            <i><code>Name</code> (i.e. column 1)</i>\n          </td>\n          <td style=\"border:none\">\n            <i>j<sub>B</sub> =</i>\n          </td>\n          <td style=\"border:none\">\n            <i><code>Character</code> (i.e. column 0)</i>\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n</table>\n<p><strong>Output</strong></p>\n<table>\n<thead>\n<tr>\n<th>A_age</th>\n<th>A_name</th>\n<th>B_character</th>\n<th>B_nemesis</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>27</td>\n<td>Jonah</td>\n<td>Jonah</td>\n<td>Whales</td>\n</tr>\n<tr>\n<td>27</td>\n<td>Jonah</td>\n<td>Jonah</td>\n<td>Spiders</td>\n</tr>\n<tr>\n<td>18</td>\n<td>Alan</td>\n<td>Alan</td>\n<td>Ghosts</td>\n</tr>\n<tr>\n<td>18</td>\n<td>Alan</td>\n<td>Alan</td>\n<td>Zombies</td>\n</tr>\n<tr>\n<td>28</td>\n<td>Glory</td>\n<td>Glory</td>\n<td>Buffy</td>\n</tr>\n<tr>\n<td>28</td>\n<td>Alan</td>\n<td>Alan</td>\n<td>Ghosts</td>\n</tr>\n<tr>\n<td>28</td>\n<td>Alan</td>\n<td>Alan</td>\n<td>Zombies</td>\n</tr>\n</tbody>\n</table>\n<p>The order of the rows in the output table is not significant.</p>\n</section>","notes":null,"challengeType":1,"helpCategory":"Rosetta","videoUrl":null,"superBlock":"rosetta-code","translationPending":false,"forumTopicId":302284,"fields":{"blockName":"rosetta-code-challenges","slug":"/learn/rosetta-code/rosetta-code-challenges/hash-join","tests":[{"text":"<p><code>hashJoin</code> should be a function.</p>","testString":"assert(typeof hashJoin === 'function');"},{"text":"<p><code>hashJoin([{ age: 27, name: \"Jonah\" }, { age: 18, name: \"Alan\" }, { age: 28, name: \"Glory\" }, { age: 18, name: \"Popeye\" }, { age: 28, name: \"Alan\" }], [{ character: \"Jonah\", nemesis: \"Whales\" }, { character: \"Jonah\", nemesis: \"Spiders\" }, { character: \"Alan\", nemesis: \"Ghosts\" }, { character:\"Alan\", nemesis: \"Zombies\" }, { character: \"Glory\", nemesis: \"Buffy\" }, { character: \"Bob\", nemesis: \"foo\" }])</code> should return <code>[{\"A_age\": 27,\"A_name\": \"Jonah\", \"B_character\": \"Jonah\", \"B_nemesis\": \"Whales\"}, {\"A_age\": 27,\"A_name\": \"Jonah\", \"B_character\": \"Jonah\", \"B_nemesis\": \"Spiders\"}, {\"A_age\": 18,\"A_name\": \"Alan\", \"B_character\": \"Alan\", \"B_nemesis\": \"Ghosts\"}, {\"A_age\": 18,\"A_name\": \"Alan\", \"B_character\": \"Alan\", \"B_nemesis\": \"Zombies\"}, {\"A_age\": 28,\"A_name\": \"Glory\", \"B_character\": \"Glory\", \"B_nemesis\": \"Buffy\"}, {\"A_age\": 28,\"A_name\": \"Alan\", \"B_character\": \"Alan\", \"B_nemesis\": \"Ghosts\"}, {\"A_age\": 28,\"A_name\": \"Alan\", \"B_character\": \"Alan\", \"B_nemesis\": \"Zombies\"}]</code></p>","testString":"assert.deepEqual(hashJoin(hash1, hash2), res);"}]},"required":[],"usesMultifileEditor":false,"challengeFiles":[{"fileKey":"scriptjs","ext":"js","name":"script","contents":"function hashJoin(hash1, hash2) {\n\n  return [];\n}","head":"","tail":"const hash1 = [\n    { age: 27, name: 'Jonah' },\n    { age: 18, name: 'Alan' },\n    { age: 28, name: 'Glory' },\n    { age: 18, name: 'Popeye' },\n    { age: 28, name: 'Alan' }\n];\n\nconst hash2 = [\n    { character: 'Jonah', nemesis: 'Whales' },\n    { character: 'Jonah', nemesis: 'Spiders' },\n    { character: 'Alan', nemesis: 'Ghosts' },\n    { character: 'Alan', nemesis: 'Zombies' },\n    { character: 'Glory', nemesis: 'Buffy' },\n    { character: 'Bob', nemesis: 'foo' }\n];\n\nconst res = [\n    { A_age: 27, A_name: 'Jonah', B_character: 'Jonah', B_nemesis: 'Whales' },\n    { A_age: 27, A_name: 'Jonah', B_character: 'Jonah', B_nemesis: 'Spiders' },\n    { A_age: 18, A_name: 'Alan', B_character: 'Alan', B_nemesis: 'Ghosts' },\n    { A_age: 18, A_name: 'Alan', B_character: 'Alan', B_nemesis: 'Zombies' },\n    { A_age: 28, A_name: 'Glory', B_character: 'Glory', B_nemesis: 'Buffy' },\n    { A_age: 28, A_name: 'Alan', B_character: 'Alan', B_nemesis: 'Ghosts' },\n    { A_age: 28, A_name: 'Alan', B_character: 'Alan', B_nemesis: 'Zombies' }\n];\n\nconst bench1 = [{ name: 'u2v7v', num: 1 }, { name: 'n53c8', num: 10 }, { name: 'oysce', num: 9 }, { name: '0mto2s', num: 1 }, { name: 'vkh5id', num: 4 }, { name: '5od0cf', num: 8 }, { name: 'uuulue', num: 10 }, { name: '3rgsbi', num: 9 }, { name: 'kccv35r', num: 4 }, { name: '80un74', num: 9 }, { name: 'h4pp3', num: 6 }, { name: '51bit', num: 7 }, { name: 'j9ndf', num: 8 }, { name: 'vf3u1', num: 10 }, { name: 'g0bw0om', num: 10 }, { name: 'j031x', num: 7 }, { name: 'ij3asc', num: 9 }, { name: 'byv83y', num: 8 }, { name: 'bjzp4k', num: 4 }, { name: 'f3kbnm', num: 10 }];\nconst bench2 = [{ friend: 'o8b', num: 8 }, { friend: 'ye', num: 2 }, { friend: '32i', num: 5 }, { friend: 'uz', num: 3 }, { friend: 'a5k', num: 4 }, { friend: 'uad', num: 7 }, { friend: '3w5', num: 10 }, { friend: 'vw', num: 10 }, { friend: 'ah', num: 4 }, { friend: 'qv', num: 7 }, { friend: 'ozv', num: 2 }, { friend: '9ri', num: 10 }, { friend: '7nu', num: 4 }, { friend: 'w3', num: 9 }, { friend: 'tgp', num: 8 }, { friend: 'ibs', num: 1 }, { friend: 'ss7', num: 6 }, { friend: 'g44', num: 9 }, { friend: 'tab', num: 9 }, { friend: 'zem', num: 10 }];","editableRegionBoundaries":[],"history":["script.js"]}]}}},"pageContext":{"challengeMeta":{"blockHashSlug":"/learn/rosetta-code/#rosetta-code-challenges","dashedName":"hash-join","certification":"rosetta-code","disableLoopProtectTests":true,"disableLoopProtectPreview":false,"superBlock":"rosetta-code","block":"rosetta-code-challenges","isFirstStep":false,"template":null,"required":[],"nextBlock":"rosetta-code-challenges","nextChallengePath":"/learn/rosetta-code/rosetta-code-challenges/heronian-triangles","prevChallengePath":"/learn/rosetta-code/rosetta-code-challenges/hash-from-two-arrays","id":"5956795bc9e2c415eb244de1"},"projectPreview":{"showProjectPreview":false,"challengeData":{"challengeType":1,"challengeFiles":[{"name":"script","ext":"js","contents":"function ZigZagMatrix(n) {\n  const mtx = [];\n  for (let i = 0; i < n; i++) {\n    mtx[i] = [];\n  }\n\n  let i = 1;\n  let j = 1;\n  for (let e = 0; e < n * n; e++) {\n    mtx[i - 1][j - 1] = e;\n    if ((i + j) % 2 === 0) {\n      // Even stripes\n      if (j < n) j++;\n      else i += 2;\n      if (i > 1) i--;\n    } else {\n      // Odd stripes\n      if (i < n) i++;\n      else j += 2;\n      if (j > 1) j--;\n    }\n  }\n  return mtx;\n}","head":"","tail":"const zm1 = [[0]];\nconst zm2 = [[0, 1], [2, 3]];\nconst zm5 = [\n  [0, 1, 5, 6, 14],\n  [2, 4, 7, 13, 15],\n  [3, 8, 12, 16, 21],\n  [9, 11, 17, 20, 22],\n  [10, 18, 19, 23, 24]\n];","history":["script.js"],"fileKey":"scriptjs"}]}},"slug":"/learn/rosetta-code/rosetta-code-challenges/hash-join"}},
    "staticQueryHashes": ["1800977889","4268002518"]}