"use strict";(self.webpackChunk_freecodecamp_client=self.webpackChunk_freecodecamp_client||[]).push([[145],{75344:function(e,t,n){n.d(t,{A:function(){return r}});var s=n(72047),a=n(538),l=n(43319),o=n(64844);function r(e){let{keyboardShortcuts:t,toggleKeyboardShortcuts:n,explain:r}=e;const{t:c}=(0,a.Bd)();return s.createElement(s.Fragment,null,s.createElement(o.A,{action:c("settings.labels.keyboard-shortcuts"),explain:r,flag:t,flagName:"keyboard-shortcuts",offLabel:c("buttons.off"),onLabel:c("buttons.on"),toggleFlag:()=>{n(!t)}}),s.createElement(l.hK,{size:"medium"}))}r.displayName="KeyboardShortcutsSettings"},56875:function(e,t,n){var s=n(72047),a=n(538),l=n(21587);function o(e){let{heading:t,isCompleted:n=!1}=e;const{t:o}=(0,a.Bd)();return s.createElement("div",{className:"challenge-heading-wrap"},s.createElement("h2",{className:"challenge-heading"},o(t)),n&&s.createElement(l.A,null))}o.displayName="ChallengeHeading",t.A=o},28358:function(e,t,n){n.d(t,{A:function(){return K}});n(94814);var s=n(72047),a=n(12479),l=n(538),o=n(43319);function r(e){return s.createElement(s.Fragment,null,s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:e.fill||"var(--gray-00)"},s.createElement("rect",{width:"256",height:"256",fill:"none"}),s.createElement("path",{d:"M216,40H40A16.01833,16.01833,0,0,0,24,56V200a16.01833,16.01833,0,0,0,16,16H216a16.01833,16.01833,0,0,0,16-16V56A16.01833,16.01833,0,0,0,216,40ZM96,148a19.85259,19.85259,0,0,0,14.28613-6.00293,7.99956,7.99956,0,0,1,11.42774,11.19727,36,36,0,1,1,0-50.38868,7.99956,7.99956,0,0,1-11.42774,11.19727A20.00012,20.00012,0,1,0,96,148Zm72,0a19.85259,19.85259,0,0,0,14.28613-6.00293,7.99956,7.99956,0,0,1,11.42774,11.19727,36,36,0,1,1,0-50.38868,7.99956,7.99956,0,0,1-11.42774,11.19727A20.00012,20.00012,0,1,0,168,148Z"})))}r.displayName="ClosedCaptionsIcon";var c=r;const m="https://cdn.freecodecamp.org/curriculum/english/animation-assets",i=m+"/sounds",u=m+"/images",g=u+"/backgrounds",p=u+"/characters",h=p+"/alice",d=p+"/anna",y=p+"/bob",b=p+"/brian",E=p+"/npc",C=p+"/david",f=p+"/npc",v=p+"/jake",w=p+"/james",k=p+"/linda",O=p+"/lisa",S=p+"/maria",A=p+"/sarah",T=p+"/npc",N=p+"/sophie",M=p+"/tom",x=p+"/npc",z=p+"/npc",I=p+"/npc",P={Alice:{base:h+"/base.png",brows:h+"/brows-neutral.png",eyesClosed:h+"/eyes-closed.png",eyesOpen:h+"/eyes-open.png",glasses:null,mouthClosed:h+"/mouth-smile.png",mouthOpen:h+"/mouth-laugh.png"},Amy:{base:z+"/girl-base.png",brows:z+"/girl-base.png",eyesClosed:z+"/girl-eyes-closed.png",eyesOpen:z+"/girl-eyes-open.png",glasses:null,mouthClosed:z+"/girl-mouth-smile.png",mouthOpen:z+"/girl-mouth-laugh.png"},Anna:{base:d+"/base.png",brows:d+"/brows-normal.png",eyesClosed:d+"/eyes-closed.png",eyesOpen:d+"/eyes-open.png",glasses:null,mouthClosed:d+"/mouth-smile.png",mouthOpen:d+"/mouth-laugh.png"},Bob:{base:y+"/base.png",brows:y+"/brows-neutral.png",eyesClosed:y+"/eyes-closed.png",eyesOpen:y+"/eyes-open.png",glasses:null,mouthClosed:y+"/mouth-smile.png",mouthOpen:y+"/mouth-laugh.png"},Brian:{base:b+"/base.png",brows:b+"/brows-neutral.png",eyesClosed:b+"/eyes-closed.png",eyesOpen:b+"/eyes-open.png",glasses:b+"/glasses.png",mouthClosed:b+"/mouth-smile.png",mouthOpen:b+"/mouth-laugh.png"},Candidate:{base:E+"/boy-base.png",brows:E+"/boy-base.png",eyesClosed:E+"/boy-eyes-closed.png",eyesOpen:E+"/boy-eyes-open.png",glasses:null,mouthClosed:E+"/boy-mouth-smile.png",mouthOpen:E+"/boy-mouth-laugh.png"},David:{base:C+"/base.png",brows:C+"/brows-neutral.png",eyesClosed:C+"/eyes-closed.png",eyesOpen:C+"/eyes-open.png",glasses:null,mouthClosed:C+"/mouth-smile.png",mouthOpen:C+"/mouth-laugh.png"},"Delivery Man":{base:I+"/man-base.png",brows:I+"/man-base.png",eyesClosed:I+"/man-eyes-closed.png",eyesOpen:I+"/man-eyes-open.png",glasses:null,mouthClosed:I+"/man-mouth-smile.png",mouthOpen:I+"/man-mouth-laugh.png"},Expert:{base:f+"/man-base.png",brows:f+"/man-base.png",eyesClosed:f+"/man-eyes-closed.png",eyesOpen:f+"/man-eyes-open.png",glasses:null,mouthClosed:f+"/man-mouth-smile.png",mouthOpen:f+"/man-mouth-laugh.png"},Jake:{base:v+"/base.png",brows:v+"/brows.png",eyesClosed:v+"/eyes-closed.png",eyesOpen:v+"/eyes-open.png",glasses:null,mouthClosed:v+"/mouth-smile.png",mouthOpen:v+"/mouth-laugh.png"},James:{base:w+"/base.png",brows:w+"/brows-neutral.png",eyesClosed:w+"/eyes-closed.png",eyesOpen:w+"/eyes-open.png",glasses:w+"/glasses.png",mouthClosed:w+"/mouth-smile.png",mouthOpen:w+"/mouth-laugh.png"},Linda:{base:k+"/base.png",brows:k+"/brows-neutral.png",eyesClosed:k+"/eyes-closed.png",eyesOpen:k+"/eyes-open.png",glasses:null,mouthClosed:k+"/mouth-smile.png",mouthOpen:k+"/mouth-laugh.png"},Lisa:{base:O+"/base.png",brows:O+"/brows-neutral.png",eyesClosed:O+"/eyes-closed.png",eyesOpen:O+"/eyes-open.png",glasses:null,mouthClosed:O+"/mouth-smile.png",mouthOpen:O+"/mouth-laugh.png"},Maria:{base:S+"/base.png",brows:S+"/brows-normal.png",eyesClosed:S+"/eyes-closed.png",eyesOpen:S+"/eyes-open.png",glasses:S+"/glasses.png",mouthClosed:S+"/mouth-smile.png",mouthOpen:S+"/mouth-laugh.png"},Mark:{base:x+"/boy-base.png",brows:x+"/boy-base.png",eyesClosed:x+"/boy-eyes-closed.png",eyesOpen:x+"/boy-eyes-open.png",glasses:null,mouthClosed:x+"/boy-mouth-smile.png",mouthOpen:x+"/boy-mouth-laugh.png"},Sarah:{base:A+"/base.png",brows:A+"/brows-normal.png",eyesClosed:A+"/eyes-closed.png",eyesOpen:A+"/eyes-open.png",glasses:null,mouthClosed:A+"/mouth-smile.png",mouthOpen:A+"/mouth-laugh.png"},"Second Candidate":{base:T+"/man-base.png",brows:T+"/man-base.png",eyesClosed:T+"/man-eyes-closed.png",eyesOpen:T+"/man-eyes-open.png",glasses:null,mouthClosed:T+"/man-mouth-smile.png",mouthOpen:T+"/man-mouth-laugh.png"},Sophie:{base:N+"/base.png",brows:N+"/brows-neutral.png",eyesClosed:N+"/eyes-closed.png",eyesOpen:N+"/eyes-open.png",glasses:N+"/glasses.png",mouthClosed:N+"/mouth-smile.png",mouthOpen:N+"/mouth-laugh.png"},Tom:{base:M+"/base.png",brows:M+"/brows-normal.png",eyesClosed:M+"/eyes-closed.png",eyesOpen:M+"/eyes-open.png",glasses:null,mouthClosed:M+"/mouth-smile.png",mouthOpen:M+"/mouth-laugh.png"}};function B(e){let{position:t,opacity:n,name:a,isBlinking:l,isTalking:o}=e;const[r,c]=(0,s.useState)(!0),[m,i]=(0,s.useState)(!1);(0,s.useEffect)((()=>{let e=null,t=null;if(l){const t=Math.floor(3e3*Math.random())+2e3;e=setInterval((()=>{const e=Math.floor(1e3*Math.random());setTimeout((()=>{c(!1),setTimeout((()=>{c(!0)}),30)}),e)}),t)}if(o){const e=()=>{const e=n(0,100),t=n(150,300);setTimeout((()=>{i(!0)}),e),setTimeout((()=>{i(!1)}),t)};e(),t=setInterval((()=>{e()}),300)}function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}return()=>{c(!0),i(!1),e&&clearInterval(e),t&&clearInterval(t)}}),[l,o]);const u={opacity:n};t.x&&(u.left=t.x+"%"),t.y&&(u.top=t.y+"%");const g={transform:t.z?"translate(-"+50*t.z+"%) scale("+t.z+")":"translate(-50%)"},{base:p,brows:h,eyesOpen:d,eyesClosed:y,mouthOpen:b,mouthClosed:E,glasses:C}=P[a];return s.createElement("div",{style:u,className:"character-wrap"},s.createElement("img",{style:g,className:"character-feature",src:p,alt:""}),s.createElement("img",{style:g,className:"character-feature",src:h,alt:""}),s.createElement("img",{style:g,className:"character-feature",src:r?d:y,alt:""}),s.createElement("img",{style:g,className:"character-feature",src:m?b:E,alt:""}),C&&s.createElement("img",{style:g,className:"character-feature",src:C,alt:""}))}B.displayName="Character";var L=B;const F=e=>1e3*e,H=e=>{e&&((new Image).src=e)};function D(e){let{scene:t,isPlaying:n,setIsPlaying:r}=e;const{t:m}=(0,l.Bd)(),{setup:p,commands:h}=t,{audio:d,alwaysShowDialogue:y}=p,{startTimestamp:b=null,finishTimestamp:E=null}=d,C=null!==b&&null!==E,f=C?"#t="+b:"",v=(0,s.useRef)(new Audio(i+"/"+d.filename+f)),w=C?F(E-b):1/0;(0,s.useEffect)((()=>(v.current.addEventListener("canplaythrough",_),H(g+"/"+p.background),p.characters.map((e=>{let{character:t}=e;return Object.values(P[t])})).flat().forEach(H),h.map((e=>{let{background:t}=e;return t?g+"/"+t:null})).forEach(H),()=>{const{current:e}=v;e.pause(),e.currentTime=0,e.removeEventListener("canplaythrough",_)})),[v,p.background,p.characters,h]);const k=p.background,O={label:"",text:"",align:"left"},S=p.characters.map((e=>{var t;return{...e,opacity:null!==(t=e.opacity)&&void 0!==t?t:1,isTalking:!1}})),[A,T]=(0,s.useState)(!1),[N,M]=(0,s.useState)(!1),[x,z]=(0,s.useState)(!1),[I,B]=(0,s.useState)(S),[D,K]=(0,s.useState)(O),[R,q]=(0,s.useState)(k);(0,s.useEffect)((()=>{n?Z():J()}),[n]);const _=()=>{T(!0)};let j=0,$=!1;function V(){Date.now()-j>=w&&($=!0,v.current.pause()),$||window.requestAnimationFrame(V)}const Z=()=>{M(!0),setTimeout((()=>{v.current.paused&&(j=Date.now(),v.current.play()),C&&V()}),F(d.startTime)),h.forEach(((e,t)=>{setTimeout((()=>{e.background&&q(e.background),K(e.dialogue?{...e.dialogue,label:e.character}:O),B((t=>t.map((t=>{var n,s;return t.character===e.character?{...t,position:null!==(n=e.position)&&void 0!==n?n:t.position,opacity:null!==(s=e.opacity)&&void 0!==s?s:t.opacity,isTalking:!!e.dialogue}:t}))))}),F(e.startTime)),e.dialogue&&setTimeout((()=>{B((t=>t.map((t=>t.character===e.character?{...t,isTalking:!1}:t))))}),F(e.finishTime)),t===h.length-1&&setTimeout((()=>{r(!1)}),e.finishTime?F(e.finishTime)+500:F(e.startTime)+500)}))},J=()=>{v.current.pause(),v.current.src=i+"/"+d.filename+f,v.current.currentTime=d.startTimestamp||0,M(!1),K(O),B(S),q(k)};return s.createElement(a.fv,{lg:10,lgOffset:1,md:10,mdOffset:1},s.createElement("div",{className:"scene-wrapper",style:{backgroundImage:'url("'+g+"/"+R+'")',backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",aspectRatio:"16 / 9"}},A?s.createElement(s.Fragment,null,I.map(((e,t)=>{let{character:a,position:l={},opacity:o=1,isTalking:r=!1}=e;return s.createElement(L,{key:t,name:a,position:l,opacity:o,isTalking:r,isBlinking:n})})),N&&(y||x)&&s.createElement("div",{className:"scene-dialogue-wrap "+(D.align?"scene-dialogue-align-"+D.align:"")},s.createElement("div",{className:"scene-dialogue-label"},D.label),s.createElement("div",{className:"scene-dialogue-text"},D.text)),!n&&s.createElement("div",{className:"scene-start-screen"},s.createElement("button",{className:"scene-start-btn scene-play-btn",onClick:()=>{r(!0)}},s.createElement("img",{src:u+"/play-button.png",alt:m("buttons.play-scene")})),!y&&s.createElement("button",{className:"scene-start-btn scene-a11y-btn","aria-label":"closed captions","aria-pressed":x,onClick:()=>z(!x)},s.createElement(c,{fill:x?"var(--gray-00)":"var(--gray-15)"})))):s.createElement(o.aH,null)))}D.displayName="Scene";var K=D},25500:function(e,t,n){var s=n(72047),a=n(538),l=n(6731),o=n(86900),r=n(68088),c=n(12479),m=n(22148),i=n(37371),u=n(71381),g=n(23116),p=n(75344);const h=(0,r.Mz)(i.A$,g.dt,((e,t)=>({isOpen:e,user:t})));function d(e){let{closeShortcutsModal:t,toggleKeyboardShortcuts:n,isOpen:a,t:l,user:{keyboardShortcuts:o}}=e;return s.createElement(c.aF,{onClose:t,open:a},s.createElement(c.aF.Header,{showCloseButton:!1},l("shortcuts.title")),s.createElement(c.aF.Body,{alignment:"start"},s.createElement("table",{className:"shortcuts-modal-table"},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{scope:"col"},l("shortcuts.table-header-action")),s.createElement("th",{scope:"col"},l("shortcuts.table-header-key")))),s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,l("shortcuts.navigation-mode")),s.createElement("td",null,"ESC")),s.createElement("tr",null,s.createElement("td",null,l("shortcuts.execute-challenge")),s.createElement("td",null,"CTRL/Command + Enter")),s.createElement("tr",null,s.createElement("td",null,l("shortcuts.play-scene")),s.createElement("td",null,"CTRL + Space")),s.createElement("tr",null,s.createElement("td",null,l("shortcuts.focus-editor")),s.createElement("td",null,"e")),s.createElement("tr",null,s.createElement("td",null,l("shortcuts.focus-instructions-panel")),s.createElement("td",null,"r")),s.createElement("tr",null,s.createElement("td",null,l("shortcuts.navigate-previous")),s.createElement("td",null,"p")),s.createElement("tr",null,s.createElement("td",null,l("shortcuts.navigate-next")),s.createElement("td",null,"n"))))),s.createElement(c.aF.Footer,null,s.createElement(p.A,{keyboardShortcuts:o,toggleKeyboardShortcuts:n}),s.createElement(c.$n,{block:!0,size:"small",variant:"primary",onClick:t},l("buttons.close"))))}d.displayName="ShortcutsModal",t.A=(0,l.Ng)(h,(e=>(0,o.zH)({closeShortcutsModal:()=>(0,m.Oo)("shortcuts"),toggleKeyboardShortcuts:e=>(0,u._1)({keyboardShortcuts:e})},e)))((0,a.CI)()(d))},41968:function(e,t,n){n.r(t);var s=n(72047),a=n(19845),l=n(35964),o=n(538),r=n(6731),c=n(86900),m=n(68088),i=n(12479),u=n(25500),g=n(65176),p=n(58658),h=n(9496),d=n(24519),y=n(60144),b=n(56875),E=n(4204),C=n(65665),f=n(22148),v=n(37371),w=n(28358);const k=(0,m.Mz)(v.m3,(e=>({isChallengeCompleted:e})));class O extends s.Component{constructor(e){super(e),this.container=s.createRef(),this.handleAssignmentChange=(e,t)=>{const n=e.target.checked?this.state.assignmentsCompleted+1:this.state.assignmentsCompleted-1,s=t===n;this.setState({assignmentsCompleted:n,allAssignmentsCompleted:s})},this.onVideoLoad=()=>{this.setState({videoIsLoaded:!0})},this.setIsScenePlaying=e=>{this.setState({isScenePlaying:e})},this.state={isScenePlaying:!1,subtitles:"",downloadURL:null,assignmentsCompleted:0,allAssignmentsCompleted:!1,videoIsLoaded:!1},this.handleSubmit=this.handleSubmit.bind(this)}componentDidMount(){var e;const{challengeMounted:t,data:{challengeNode:{challenge:{fields:{tests:n},title:s,challengeType:a,helpCategory:l}}},pageContext:{challengeMeta:o},initTests:r,updateChallengeMeta:c}=this.props;r(n),c({...o,title:s,challengeType:a,helpCategory:l}),t(o.id),null===(e=this.container.current)||void 0===e||e.focus()}componentDidUpdate(e){const{data:{challengeNode:{challenge:{title:t}}}}=e,{challengeMounted:n,data:{challengeNode:{challenge:{title:s,challengeType:a,helpCategory:l}}},pageContext:{challengeMeta:o},updateChallengeMeta:r}=this.props;t!==s&&(r({...o,title:s,challengeType:a,helpCategory:l}),n(o.id))}handleSubmit(){const{openCompletionModal:e}=this.props;this.state.allAssignmentsCompleted&&e()}render(){const{data:{challengeNode:{challenge:{title:e,description:t,superBlock:n,block:o,fields:{blockName:r},assignments:c,translationPending:m,scene:f}}},openHelpModal:v,pageContext:{challengeMeta:{nextChallengePath:k,prevChallengePath:O}},isChallengeCompleted:S,t:A}=this.props,T=A("intro:"+n+".blocks."+o+".title")+" - "+e;return s.createElement(h.A,{executeChallenge:()=>this.handleSubmit(),containerRef:this.container,nextChallengePath:k,prevChallengePath:O,playScene:()=>this.setIsScenePlaying(!0)},s.createElement(p.A,null,s.createElement(a.A,{title:T+" | "+A("learn.learn")+" | freeCodeCamp.org"}),s.createElement(i.mc,null,s.createElement(i.fI,null,s.createElement(i.fv,{md:8,mdOffset:2,sm:10,smOffset:1,xs:12},s.createElement(g.A,{size:"medium"}),s.createElement(y.A,{isCompleted:S,translationPending:m},e),s.createElement(C.A,{className:"line-numbers",text:t}),s.createElement(g.A,{size:"medium"})),f&&s.createElement(w.A,{scene:f,isPlaying:this.state.isScenePlaying,setIsPlaying:this.setIsScenePlaying}),s.createElement(i.fv,{md:8,mdOffset:2,sm:10,smOffset:1,xs:12},s.createElement(g.A,{size:"medium"}),s.createElement(l.ObserveKeys,null,s.createElement(b.A,{heading:A("learn.assignments")}),s.createElement("div",{className:"video-quiz-options"},c.map(((e,t)=>s.createElement("label",{className:"video-quiz-option-label",key:t},s.createElement("input",{name:"assignment",type:"checkbox",onChange:e=>this.handleAssignmentChange(e,c.length)}),s.createElement(C.A,{className:"video-quiz-option",text:e}),s.createElement(g.A,{size:"medium"}))))),s.createElement(g.A,{size:"medium"})),s.createElement("div",{style:{textAlign:"center"}},!this.state.allAssignmentsCompleted&&c.length>0&&s.createElement(s.Fragment,null,s.createElement("br",null),s.createElement("span",null,A("learn.assignment-not-complete")))),s.createElement(g.A,{size:"medium"}),s.createElement(i.$n,{block:!0,variant:"primary",disabled:!this.state.allAssignmentsCompleted,onClick:()=>this.handleSubmit()},A("buttons.submit")),s.createElement(g.A,{size:"xxSmall"}),s.createElement(i.$n,{block:!0,variant:"primary",onClick:v},A("buttons.ask-for-help")),s.createElement(g.A,{size:"large"})),s.createElement(d.A,null),s.createElement(E.A,{challengeTitle:e,challengeBlock:r}))),s.createElement(u.A,null)))}}O.displayName="ShowDialogue",t.default=(0,r.Ng)(k,(e=>(0,c.zH)({initTests:f.gT,updateChallengeMeta:f.a0,challengeMounted:f.Kj,openCompletionModal:()=>(0,f.qf)("completion"),openHelpModal:()=>(0,f.qf)("help")},e)))((0,o.CI)()(O))}}]);
//# sourceMappingURL=component---src-templates-challenges-dialogue-show-tsx-278ae99887e5d1301638.js.map